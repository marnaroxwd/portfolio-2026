<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<style>
  body { background: #F7F7F5; font-family: sans-serif; padding: 40px; }

  .link {
    position: relative;
    overflow: hidden;
    display: inline-block;
    color: #2D2D2A;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    cursor: pointer;
  }

  .glitch-fill {
    position: absolute;
    inset: 0;
    background: #2D2D2A;
    z-index: 0;
    transform: scaleX(0);
    transform-origin: left center;
    transition: transform 0.4s cubic-bezier(0.77, 0, 0.175, 1);
    pointer-events: none;
  }

  .link.is-hovered .glitch-fill { transform: scaleX(1); }
  .link.is-leaving .glitch-fill {
    transform: scaleX(0);
    transform-origin: right center;
    transition: transform 0.4s cubic-bezier(0.46, 0.03, 0.52, 0.96);
  }

  .link.is-hovered { color: #F7F7F5; }

  .glitch-sizer {
    display: block;
    opacity: 0;
    pointer-events: none;
    white-space: nowrap;
    user-select: none;
  }

  .glitch-label {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    align-items: center;
    white-space: nowrap;
    z-index: 2;
  }
</style>
</head>
<body>

<ul style="list-style:none; padding:0; display:flex; gap:40px;">
  <li><a class="link" href="#">Ã€ propos</a></li>
  <li><a class="link" href="#">Projets</a></li>
  <li><a class="link" href="#">Contact</a></li>
</ul>

<script>
const LETTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

function scramble(el, originalText) {
  let iteration = 0;
  const step = originalText.length / 6;
  if (el._interval) clearInterval(el._interval);
  el._interval = setInterval(() => {
    el.textContent = originalText.split('').map((letter, index) => {
      if (index < iteration) return originalText[index];
      return LETTERS[Math.floor(Math.random() * 26)];
    }).join('');
    if (iteration >= originalText.length) {
      clearInterval(el._interval);
      el.textContent = originalText;
    }
    iteration += step;
  }, 60);
}

function stopScramble(el, originalText) {
  if (el._interval) clearInterval(el._interval);
  el.textContent = originalText;
}

document.querySelectorAll('.link').forEach(link => {
  const text = link.textContent.trim();
  link.innerHTML = '';

  const fill = document.createElement('span');
  fill.className = 'glitch-fill';

  const sizer = document.createElement('span');
  sizer.className = 'glitch-sizer';
  sizer.textContent = text;

  const label = document.createElement('span');
  label.className = 'glitch-label';
  label.textContent = text;

  link.appendChild(fill);
  link.appendChild(sizer);
  link.appendChild(label);

  link.addEventListener('mouseenter', () => {
    link.classList.remove('is-leaving');
    link.classList.add('is-hovered');
    scramble(label, text);
  });

  link.addEventListener('mouseleave', () => {
    stopScramble(label, text);
    link.classList.remove('is-hovered');
    link.classList.add('is-leaving');
    setTimeout(() => link.classList.remove('is-leaving'), 400);
  });
});
</script>
</body>
</html>